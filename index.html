<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asynchronous Applications Sentiment Analysis</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <header class = "nav-container">
        <a src="/" id = logo> Asynchronous Applications Sentiment Analysis</a>
        <nav>
            <li><a href='index.html'>Home</a></li>
            <li><a href="tasks.html">Tasks</a></li>
            <li><button id = "show-login">Login</button></li>
            <li><a href='register.html'>Register</a></li>
        </nav>
    </header>

    <div class = "popup">
        <div class = "close-button">&times;</div>
        <div class = "form">
            <h2>Login</h2>
            <div class = "form-element">
                <label for = "email">Email</label>
                <input type = "email" placeholder="example@email.com" id = "email" required>
            </div>

            <div class = "form-element">
                <label for = "password">Password</label>
                <input type = "password" placeholder="**********" id = "password" required>
            </div>

            <div class = "form-element">
                <label for = "remember-me">Remember Me</label>
                <input type = "checkbox" id = "remember-me">
            </div>

            <div class = "form-element">
                <button onclick="loginSubmit()">Sign In</button>
            </div>
        </div>
    </div>

    <div id = "hero">
        <div class = "hero-text">
            <h1 id = "hero-main-text">Welcome to Async Apps Sentiment Analysis and Social Media Scraper</h1>
            <p id = "hero-secondary-text">This service provides real-time social media posts and processing to see whats currently trending in the world!</p>
            <a href = 'register.html'>
                <button href = 'register.html'>Sign Up!</button>
            </a>
        </div>
        <div class = "image">
            <img src="img/Social-media.jpg" alt = "Photo of Social Media Apps" width = 600px>
        </div>
    </div>

    <h2>Supported Services</h2>
        <div class = "flex-container">
            <ul id = "services">
                <li><a href='twitter.html'><img src = 'img/twitter-logo.png' alt = 'Twitter' width = '100px' ></a></li>
                <li><a href='reddit.html'><img src = 'img/reddit-logo.png' alt = 'Reddit' width = 100px> </a></li>
                <li><a href='facebook.html'><img src = 'img/facebook-logo.png' alt = 'Facebook' width = 100px></a></li>
                <li><a href='telegram.html'><img src = 'img/telegram-logo.png' alt = 'Telegram' width = 100px></a></li>
                <li><a href='discord.html'><img src = 'img/discord-logo.png' alt = 'Discord' width = 100px></a></li>
            </ul>
        </div>
    <div class = "quote">
        <blockquote cite = 'https://www.vennli.com/blog/21-quotes-to-inspire-your-adventures-in-analytics'>
            <p>"An intelligent person is never afraid or ashamed to find errors in his understanding of things."</p>
            <p>- Bryant H. McGill</p>
        </blockquote>
    </div>
    <div class = "sign-up">
        <h4>Register for our service!</h4>
        <p>Signup to add tasks and view the data we are collecting for you!</p>
        <a href = 'register.html'> <button type = 'button'>Sign Up!</button></a>
    </div>

    <footer> Copyright Asynchronous Applications 2023</footer>

    
</body>

<script>
    document.querySelector("#show-login").addEventListener("click", function(){
        document.querySelector(".popup").classList.add("active");
    });

    document.querySelector(".popup .close-button").addEventListener("click", function(){
        document.querySelector(".popup").classList.remove("active");
    });

    function loginSubmit() {
            const loginForm = document.querySelector('.form');
            const data = new FormData(loginForm);
            const object = {};
            data.forEach(function(value,key) {
                object[key] = value;
            })
            const json = JSON.stringify(object);
            console.log(json)

            fetch("https://sv-api.learncs.io/login", {
                method: "POST",
                headers: {
                    'Content-Type': 'application/json'
                },
                body: json
            })

            .then(response => {
                if (!response.ok) {
                    return Promise.reject(response);
                }
                return response.json();
            })
            .then(data => {
                console.log("Success");
                console.log(data);
                window.location = "index.html"
            })
            .catch(error => {
                if (typeof error.json === "function") {
                    error.json().then(jsonError => {
                        console.log("JSON error from API");
                        console.log(error.statusText);
                    })
                } else {
                    console.log("Fetch error");
                    console.log(error);
                }
            })
        }
</script>
</html>